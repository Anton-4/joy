<!doctype html>
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
        <title>Joy demo</title>
    </head>
    <body>
        <div id="app"></div>
        <script type="module">
            import init, { run, port } from "/pkg/web.js";

            async function startup() {
                // Initialize the WASM module
                await init();

                //// Flags
                // `run` starts the Joy app and it takes a single string argument, which we call
                // "flags". The flags string is passed to your `init!` function and you can use it
                // however you want to construct your initial `Model`.
                //
                // Most of our examples discard the flags argument, so we're just passing in an
                // empty string here. However, `examples/flags.roc` does use the argument, so for
                // that example you should pass in a valid JSON string (not an object) like so:
                //
                // run(`{
                //   "name": "BrÃ¶dil",
                //   "karma": 99
                // }`);
                //
                // Note that passing in a JSON string is just a convenient and nice way of handling
                // flags. However, it's just a string, so it can have any value you'd like and you
                // are free to use it in `init!` in any way that fits your application.
                run("");

                //// Ports
                // Uncomment this line for the ports example:
                // setInterval(port, 1000, "Tick");

                // Another example of ports:
                // You can trigger an event by calling the `port` function with a string that
                // your Roc app knows how to decode into a valid Event:
                //
                //     port("YourBeautifulEvent")
                //
                // Here's an example of attaching an InteractionObserver to an element and
                // triggering an event every time the element enters the viewport:
                //
                //     const callback = (entries, observer) =>
                //       entries.forEach((entry) => {
                //         if (entry.isIntersecting) {
                //           port("ScrollSentinelVisible")
                //         }
                //       })
                //
                //     const observer = new IntersectionObserver(callback)
                //     const target = document.querySelector("#infiniteScrollSentinel")
                //     observer.observe(target)
            }

            startup().catch(console.error);
        </script>
    </body>
</html>
